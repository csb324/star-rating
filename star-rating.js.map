{"version":3,"sources":["webpack:///webpack/bootstrap 506fcbe155d29fe80a0e","webpack:///./src/star-rating.js","webpack:///./src/helpers.js","webpack:///./src/vars.js"],"names":[],"mappings":"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","file":"star-rating.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 506fcbe155d29fe80a0e\n **/","import { exists, elementTemplate, starTemplate} from \"./helpers\";\nimport { SIZE, ELEMENT_STYLE, STAR_STYLE, SELECTED_IMG_BKG, BASE_IMG_BKG, MAX_VALUE } from \"./vars\";\n\nexport class StarRating extends HTMLElement {\n\n    createdCallback(){\n        this._attrs = /(size|maxvalue|src)/i;\n        Object.defineProperty(this, \"value\", { value: 0, writable: true });\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if(this._attrs.test(name)){\n            this._update();\n            this._toggleStates(newVal ||  0);\n        }\n    }\n\n    attachedCallback() {\n        this._root = this._hasShadow() ? this.createShadowRoot() : this;\n        this._update();\n    }\n\n    reset(){\n        if(this.value !== 0) {\n            this._setValue(0);\n            this._querySelectorAllStars(removedSelectedState);\n            this.dispatchEvent(this._ratingUpdatedEvent());\n        }\n\n        function removedSelectedState(item){\n            item.classList.remove('selected');\n            this._setStateFor(item, this._src()[0], this._size());\n        }\n\n        return this;\n    }\n\n    rate(value){\n        this._setValue(value);\n        this._toggleStates(value);\n        return this;\n    }\n\n    _setStateFor(item, starImg, size){\n      if(!this._hasShadow()){\n        item.style.backgroundImage = `url(${starImg})`;\n        item.style.width = size;\n        item.style.height = size;\n      }\n      return item;\n    }\n\n    _update(){\n        this._render();\n        this._bindEvents();\n    }\n\n        // TODO: Update this & relate style attr adjustments to use Shadow DOM &\n        // CSS Properties (doing this hack now to get browser support)\n\n    _renderStars(){\n      let starArr = [];\n      let maxValue = this._maxValue();\n      while(maxValue > 0){\n        starArr.push(maxValue);\n        maxValue--;\n      }\n      return starArr.map(starTemplate).join('');\n    }\n\n    _render(){\n        if(this._hasShadow()) {\n          // console.log(CSSTemplate(this._size(), this._src()) + this._renderStars());\n          this._root.innerHTML = elementTemplate(this._size(), this._src()) + this._renderStars();\n        } else{\n          this.setAttribute('style', StarRating._style(this._size(), this._src()).element());\n          this._root.innerHTML = this._renderStars();\n        }\n    }\n\n    _ratingUpdatedEvent(){\n        return new CustomEvent(\"ratingUpdated\", {\n            detail: {\n                value: this.value,\n                maxValue: this._maxValue()\n            }\n        });\n    }\n\n    _querySelectorAllStars(iterateFn){\n        let stars = this._root.querySelectorAll('.star');\n        [].forEach.call(stars, iterateFn, this);\n        return stars;\n    }\n\n    _bindEvents(){\n        this._querySelectorAllStars(bindClicks);\n\n        function bindClicks(item, indx){\n            updateEventHandlers(this, item, 'click', starHandler);\n\n            function starHandler(evt){\n                evt.preventDefault();\n                let selectedStars = this._root.querySelectorAll('.selected');\n\n                if(selectedStars.length === indx + 1 && evt.target.classList.contains('selected')){\n                    this.reset();\n                } else {\n                    this._toggleStates(indx);\n                }\n            }\n        }\n\n        function updateEventHandlers(starRating, element, evt, handler){\n            element.removeEventListener(evt, handler.bind(starRating));\n            element.addEventListener(evt, handler.bind(starRating));\n        }\n\n    }\n\n    _updateStar(item, index){\n        return this._hasShadow() ? this._toggleStates(index) : item.setAttribute('style', `${StarRating._style(this._size(), this._src()[0]).star()};`);\n    }\n\n    _toggleStates(index){\n        let _srcs = this._src();\n        let stars = this._querySelectorAllStars(toggleStates);\n        let size = this._size();\n        this.dispatchEvent(this._ratingUpdatedEvent());\n\n        function toggleStates(item, indx){\n            let isInRange = indx <= index;\n            item.classList[isInRange ? 'add' : 'remove']('selected');\n            this._setValue(index + 1);\n            this._setStateFor(item, (isInRange ? _srcs[0] : _srcs[1]), size);\n        }\n    }\n\n    _src(){\n        let _src = this.getAttribute('src');\n        return exists(_src) ? _src.split(/(\\ *),{1}(\\ *)/).filter(filterSrc) : StarRating._sources();\n\n        function filterSrc(item){\n          if(!(/^(data).*(base64)$/.test(item)) && item.trim() !== ''){\n            return item;\n          }\n        }\n    }\n\n    _maxValue(){\n        let maxValue = parseInt(this.getAttribute('maxValue'), 10);\n        return exists(maxValue) && !isNaN(maxValue) ? maxValue : MAX_VALUE;\n    }\n\n    _size() {\n        let sizeAttr = this.getAttribute('size');\n        return exists(sizeAttr) ? sizeAttr : SIZE;\n    }\n\n    _setValue(val){\n        this.setAttribute(\"value\", val);\n        return this.value = val;\n    }\n\n    _hasShadow(){\n        return \"createShadowRoot\" in this;\n    }\n\n    static _sources(){\n      return [ BASE_IMG_BKG , SELECTED_IMG_BKG ];\n    }\n\n    static _style(size, starImg){\n\n        return {\n            element: function(){\n                return ELEMENT_STYLE;\n            },\n\n            star: function(starImg, size){\n                return  STAR_STYLE + `height: ${size};width: ${size};background-image: url(${starImg});`;\n            }\n\n        }\n\n    }\n\n}\n\n\n\ndocument.registerElement(\"star-rating\", StarRating);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/star-rating.js\n **/","export default function helpers(){\n  return {\n    exists: exists,\n    starTemplate: starTemplate,\n    elementTemplate: elementTemplate\n  };\n}\n\nexport function exists(testItem) {\n    return typeof testItem !== \"undefined\" && testItem !== null;\n}\n\nexport function starTemplate(){\n  return '<svg class=\"star\" height=\"18\" viewBox=\"0 0 18 18\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\">    <path d=\"M9 11.3l3.71 2.7-1.42-4.36L15 7h-4.55L9 2.5 7.55 7H3l3.71 2.64L5.29 14z\"/><path d=\"M0 0h18v18H0z\" fill=\"none\"/></svg>';\n}\n\nexport function elementTemplate(size, starImgs){\n\n  return `<style>\n           :host {\n             display: flex;\n             -webkit-align-items: center;\n             -ms-align-items: center;\n             -moz-align-items: center;\n             align-items: center;\n             -webkit-justify-content: center;\n             -ms-justify-content: center;\n             -moz-justify-content: center;\n             justify-content: center;\n             width: 100%;\n           }\n\n           .star {\n              height: ${size};\n              width: ${size};\n              outline: 0;\n              cursor: pointer;\n              fill: #ccc;\n              // background: rgba(255,255,255,0) url(${starImgs[0]}) no-repeat center center;\n              background-size: cover;\n           }\n\n           .star.selected {\n             // background-image: url(${starImgs[1]});\n             fill: #F1C40F;\n           }\n\n        </style>`;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers.js\n **/","export default function Vars(){\n\n    return {\n      size: SIZE,\n      maxValue: MAX_VALUE,\n      icon: {\n        base: BASE_IMG_BKG,\n        selected: SELECTED_IMG_BKG\n      },\n      styles: {\n        element: ELEMENT_STYLE,\n        star: STAR_STYLE\n      },\n      templates: {\n        css: elementTemplate,\n        html: starTemplate\n      }\n\n    };\n}\n\nexport const SIZE             = \"36px\";\nexport const MAX_VALUE        = 5;\nexport const BASE_IMG_BKG     = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjQ0NDQ0NDIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik05IDExLjNsMy43MSAyLjctMS40Mi00LjM2TDE1IDdoLTQuNTVMOSAyLjUgNy41NSA3SDNsMy43MSAyLjY0TDUuMjkgMTR6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDE4djE4SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==';\nexport const SELECTED_IMG_BKG = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRjFDNDBGIiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik05IDExLjNsMy43MSAyLjctMS40Mi00LjM2TDE1IDdoLTQuNTVMOSAyLjUgNy41NSA3SDNsMy43MSAyLjY0TDUuMjkgMTR6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDE4djE4SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==';\nexport const ELEMENT_STYLE    = `display: flex;\n                                 display: -webkit-flex;\n                                 -webkit-align-items: center;\n                                 -ms-align-items: center;\n                                 -moz-align-items: center;\n                                 align-items: center;\n                                 -webkit-justify-content: center;\n                                 -ms-justify-content: center;\n                                 -moz-justify-content: center;\n                                 justify-content: center;\n                                 width: 100%;`;\nexport const STAR_STYLE       = `outline: 0;\n                                 cursor: pointer;\n                                 background-color: rgba(255,255,255,0);\n                                 background-repeat: no-repeat;\n                                 background-position: center center;\n                                 background-size: cover;`\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/vars.js\n **/"],"sourceRoot":""}